#
# This is a generated file
#
platforms:
  - &defaults
    environment:
      - GRADLE_OPTS: -Dorg.gradle.daemon=false
      - JAVA_TOOL_OPTIONS: -XX:MaxRAM=4g -XX:ParallelGCThreads=2

  - &java8
    <<: *defaults
    docker:
      - image: circleci/openjdk:8-jdk
    
  - &java9
    <<: *defaults
    docker:
      - image: circleci/openjdk:9-jdk
    
  - &java10
    <<: *defaults
    docker:
      - image: circleci/openjdk:10-jdk
    

caches:
  workspace:
    - &persist-workspace
      persist_to_workspace:
        root: .
        paths: .
    - &attach-workspace
      attach_workspace:
        at: .
  test_results:
    - &store-test-results
      store_test_results:
        paths: build/test-results/
  dependencies:

    - &save-gradle-dependencies-java8
      save_cache:
        key: v1-gradle-java8-{{ checksum "build.gradle.kts" }}
        paths:
          - ~/.gradle/caches/modules-*/files-*/
    - &restore-gradle-dependencies-java8
      restore_cache:
        keys:
          - v1-gradle-java8-{{ checksum "build.gradle.kts" }}
    
    - &save-gradle-dependencies-java9
      save_cache:
        key: v1-gradle-java9-{{ checksum "build.gradle.kts" }}
        paths:
          - ~/.gradle/caches/modules-*/files-*/
    - &restore-gradle-dependencies-java9
      restore_cache:
        keys:
          - v1-gradle-java9-{{ checksum "build.gradle.kts" }}
    
    - &save-gradle-dependencies-java10
      save_cache:
        key: v1-gradle-java10-{{ checksum "build.gradle.kts" }}
        paths:
          - ~/.gradle/caches/modules-*/files-*/
    - &restore-gradle-dependencies-java10
      restore_cache:
        keys:
          - v1-gradle-java10-{{ checksum "build.gradle.kts" }}
    
  wrapper:
    - &save-gradle-wrapper-current
      save_cache:
        key: v1-gradle-wrapper-current-{{ checksum "gradle/wrapper/gradle-wrapper.properties" }}
        paths:
          - ~/.gradle/wrapper/dists/
    - &restore-gradle-wrapper-current
      restore_cache:
        keys:
          - v1-gradle-wrapper-current-{{ checksum "gradle/wrapper/gradle-wrapper.properties" }}

    - &save-gradle-wrapper-gradle46
      save_cache:
        key: v1-gradle-wrapper-4.6
        paths:
          - ~/.gradle/wrapper/dists/gradle-4.6-bin/
    - &restore-gradle-wrapper-gradle46
      restore_cache:
        keys:
          - v1-gradle-wrapper-4.6
    
    - &save-gradle-wrapper-gradle45
      save_cache:
        key: v1-gradle-wrapper-4.5.1
        paths:
          - ~/.gradle/wrapper/dists/gradle-4.5.1-bin/
    - &restore-gradle-wrapper-gradle45
      restore_cache:
        keys:
          - v1-gradle-wrapper-4.5.1
    
    - &save-gradle-wrapper-gradle44
      save_cache:
        key: v1-gradle-wrapper-4.4.1
        paths:
          - ~/.gradle/wrapper/dists/gradle-4.4.1-bin/
    - &restore-gradle-wrapper-gradle44
      restore_cache:
        keys:
          - v1-gradle-wrapper-4.4.1
    
    - &save-gradle-wrapper-gradle43
      save_cache:
        key: v1-gradle-wrapper-4.3.1
        paths:
          - ~/.gradle/wrapper/dists/gradle-4.3.1-bin/
    - &restore-gradle-wrapper-gradle43
      restore_cache:
        keys:
          - v1-gradle-wrapper-4.3.1
    
    - &save-gradle-wrapper-gradle42
      save_cache:
        key: v1-gradle-wrapper-4.2.1
        paths:
          - ~/.gradle/wrapper/dists/gradle-4.2.1-bin/
    - &restore-gradle-wrapper-gradle42
      restore_cache:
        keys:
          - v1-gradle-wrapper-4.2.1
    
    - &save-gradle-wrapper-gradle41
      save_cache:
        key: v1-gradle-wrapper-4.1
        paths:
          - ~/.gradle/wrapper/dists/gradle-4.1-bin/
    - &restore-gradle-wrapper-gradle41
      restore_cache:
        keys:
          - v1-gradle-wrapper-4.1
    
    - &save-gradle-wrapper-gradle40
      save_cache:
        key: v1-gradle-wrapper-4.0.2
        paths:
          - ~/.gradle/wrapper/dists/gradle-4.0.2-bin/
    - &restore-gradle-wrapper-gradle40
      restore_cache:
        keys:
          - v1-gradle-wrapper-4.0.2
    
    - &save-gradle-wrapper-gradle35
      save_cache:
        key: v1-gradle-wrapper-3.5.1
        paths:
          - ~/.gradle/wrapper/dists/gradle-3.5.1-bin/
    - &restore-gradle-wrapper-gradle35
      restore_cache:
        keys:
          - v1-gradle-wrapper-3.5.1
    
    - &save-gradle-wrapper-gradle34
      save_cache:
        key: v1-gradle-wrapper-3.4.1
        paths:
          - ~/.gradle/wrapper/dists/gradle-3.4.1-bin/
    - &restore-gradle-wrapper-gradle34
      restore_cache:
        keys:
          - v1-gradle-wrapper-3.4.1
    
    - &save-gradle-wrapper-gradle33
      save_cache:
        key: v1-gradle-wrapper-3.3
        paths:
          - ~/.gradle/wrapper/dists/gradle-3.3-bin/
    - &restore-gradle-wrapper-gradle33
      restore_cache:
        keys:
          - v1-gradle-wrapper-3.3
    
    - &save-gradle-wrapper-gradle32
      save_cache:
        key: v1-gradle-wrapper-3.2.1
        paths:
          - ~/.gradle/wrapper/dists/gradle-3.2.1-bin/
    - &restore-gradle-wrapper-gradle32
      restore_cache:
        keys:
          - v1-gradle-wrapper-3.2.1
    
    - &save-gradle-wrapper-gradle31
      save_cache:
        key: v1-gradle-wrapper-3.1
        paths:
          - ~/.gradle/wrapper/dists/gradle-3.1-bin/
    - &restore-gradle-wrapper-gradle31
      restore_cache:
        keys:
          - v1-gradle-wrapper-3.1
    
    - &save-gradle-wrapper-gradle30
      save_cache:
        key: v1-gradle-wrapper-3.0
        paths:
          - ~/.gradle/wrapper/dists/gradle-3.0-bin/
    - &restore-gradle-wrapper-gradle30
      restore_cache:
        keys:
          - v1-gradle-wrapper-3.0
    
    - &save-gradle-wrapper-gradle214
      save_cache:
        key: v1-gradle-wrapper-2.14.1
        paths:
          - ~/.gradle/wrapper/dists/gradle-2.14.1-bin/
    - &restore-gradle-wrapper-gradle214
      restore_cache:
        keys:
          - v1-gradle-wrapper-2.14.1
    
    - &save-gradle-wrapper-gradle213
      save_cache:
        key: v1-gradle-wrapper-2.13
        paths:
          - ~/.gradle/wrapper/dists/gradle-2.13-bin/
    - &restore-gradle-wrapper-gradle213
      restore_cache:
        keys:
          - v1-gradle-wrapper-2.13
    
    - &save-gradle-wrapper-gradle212
      save_cache:
        key: v1-gradle-wrapper-2.12
        paths:
          - ~/.gradle/wrapper/dists/gradle-2.12-bin/
    - &restore-gradle-wrapper-gradle212
      restore_cache:
        keys:
          - v1-gradle-wrapper-2.12
    
    - &save-gradle-wrapper-gradle211
      save_cache:
        key: v1-gradle-wrapper-2.11
        paths:
          - ~/.gradle/wrapper/dists/gradle-2.11-bin/
    - &restore-gradle-wrapper-gradle211
      restore_cache:
        keys:
          - v1-gradle-wrapper-2.11
    
    - &save-gradle-wrapper-gradle210
      save_cache:
        key: v1-gradle-wrapper-2.10
        paths:
          - ~/.gradle/wrapper/dists/gradle-2.10-bin/
    - &restore-gradle-wrapper-gradle210
      restore_cache:
        keys:
          - v1-gradle-wrapper-2.10
    
    - &save-gradle-wrapper-gradle29
      save_cache:
        key: v1-gradle-wrapper-2.9
        paths:
          - ~/.gradle/wrapper/dists/gradle-2.9-bin/
    - &restore-gradle-wrapper-gradle29
      restore_cache:
        keys:
          - v1-gradle-wrapper-2.9
    
    - &save-gradle-wrapper-gradle28
      save_cache:
        key: v1-gradle-wrapper-2.8
        paths:
          - ~/.gradle/wrapper/dists/gradle-2.8-bin/
    - &restore-gradle-wrapper-gradle28
      restore_cache:
        keys:
          - v1-gradle-wrapper-2.8
    
    - &save-gradle-wrapper-gradle27
      save_cache:
        key: v1-gradle-wrapper-2.7
        paths:
          - ~/.gradle/wrapper/dists/gradle-2.7-bin/
    - &restore-gradle-wrapper-gradle27
      restore_cache:
        keys:
          - v1-gradle-wrapper-2.7
    
    - &save-gradle-wrapper-gradle26
      save_cache:
        key: v1-gradle-wrapper-2.6
        paths:
          - ~/.gradle/wrapper/dists/gradle-2.6-bin/
    - &restore-gradle-wrapper-gradle26
      restore_cache:
        keys:
          - v1-gradle-wrapper-2.6
    
    - &save-gradle-wrapper-gradle25
      save_cache:
        key: v1-gradle-wrapper-2.5
        paths:
          - ~/.gradle/wrapper/dists/gradle-2.5-bin/
    - &restore-gradle-wrapper-gradle25
      restore_cache:
        keys:
          - v1-gradle-wrapper-2.5
    

version: 2
jobs:
  checkout_code:
    <<: *java8
    steps:
      - checkout
      - run:
          name: Remove Git tracking files (reduces workspace size)
          command: rm -rf .git/
      - *persist-workspace

  java8:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - run:
          name: Build
          command: ./gradlew build
      - *store-test-results
      - *save-gradle-wrapper-current
      - *save-gradle-dependencies-java8
      - *persist-workspace
    
  java9:
    <<: *java9
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java9
      - *restore-gradle-wrapper-current
      - run:
          name: Build
          command: ./gradlew build
      - *store-test-results
      - *save-gradle-wrapper-current
      - *save-gradle-dependencies-java9
      - *persist-workspace
    
  java10:
    <<: *java10
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java10
      - *restore-gradle-wrapper-current
      - run:
          name: Build
          command: ./gradlew build
      - *store-test-results
      - *save-gradle-wrapper-current
      - *save-gradle-dependencies-java10
      - *persist-workspace
    
  java8_gradle46:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle46
      - run:
          name: Test against Gradle 4.6
          command: ./gradlew test -Ptest.gradle-version=4.6
      - *store-test-results
      - *save-gradle-wrapper-gradle46
        
  java9_gradle46:
    <<: *java9
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java9
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle46
      - run:
          name: Test against Gradle 4.6
          command: ./gradlew test -Ptest.gradle-version=4.6
      - *store-test-results
      - *save-gradle-wrapper-gradle46
        
  java8_gradle45:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle45
      - run:
          name: Test against Gradle 4.5.1
          command: ./gradlew test -Ptest.gradle-version=4.5.1
      - *store-test-results
      - *save-gradle-wrapper-gradle45
        
  java9_gradle45:
    <<: *java9
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java9
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle45
      - run:
          name: Test against Gradle 4.5.1
          command: ./gradlew test -Ptest.gradle-version=4.5.1
      - *store-test-results
      - *save-gradle-wrapper-gradle45
        
  java8_gradle44:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle44
      - run:
          name: Test against Gradle 4.4.1
          command: ./gradlew test -Ptest.gradle-version=4.4.1
      - *store-test-results
      - *save-gradle-wrapper-gradle44
        
  java9_gradle44:
    <<: *java9
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java9
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle44
      - run:
          name: Test against Gradle 4.4.1
          command: ./gradlew test -Ptest.gradle-version=4.4.1
      - *store-test-results
      - *save-gradle-wrapper-gradle44
        
  java8_gradle43:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle43
      - run:
          name: Test against Gradle 4.3.1
          command: ./gradlew test -Ptest.gradle-version=4.3.1
      - *store-test-results
      - *save-gradle-wrapper-gradle43
        
  java9_gradle43:
    <<: *java9
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java9
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle43
      - run:
          name: Test against Gradle 4.3.1
          command: ./gradlew test -Ptest.gradle-version=4.3.1
      - *store-test-results
      - *save-gradle-wrapper-gradle43
        
  java8_gradle42:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle42
      - run:
          name: Test against Gradle 4.2.1
          command: ./gradlew test -Ptest.gradle-version=4.2.1
      - *store-test-results
      - *save-gradle-wrapper-gradle42
        
  java9_gradle42:
    <<: *java9
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java9
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle42
      - run:
          name: Test against Gradle 4.2.1
          command: ./gradlew test -Ptest.gradle-version=4.2.1
      - *store-test-results
      - *save-gradle-wrapper-gradle42
        
  java8_gradle41:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle41
      - run:
          name: Test against Gradle 4.1
          command: ./gradlew test -Ptest.gradle-version=4.1
      - *store-test-results
      - *save-gradle-wrapper-gradle41
        
  java8_gradle40:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle40
      - run:
          name: Test against Gradle 4.0.2
          command: ./gradlew test -Ptest.gradle-version=4.0.2
      - *store-test-results
      - *save-gradle-wrapper-gradle40
        
  java8_gradle35:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle35
      - run:
          name: Test against Gradle 3.5.1
          command: ./gradlew test -Ptest.gradle-version=3.5.1
      - *store-test-results
      - *save-gradle-wrapper-gradle35
        
  java8_gradle34:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle34
      - run:
          name: Test against Gradle 3.4.1
          command: ./gradlew test -Ptest.gradle-version=3.4.1
      - *store-test-results
      - *save-gradle-wrapper-gradle34
        
  java8_gradle33:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle33
      - run:
          name: Test against Gradle 3.3
          command: ./gradlew test -Ptest.gradle-version=3.3
      - *store-test-results
      - *save-gradle-wrapper-gradle33
        
  java8_gradle32:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle32
      - run:
          name: Test against Gradle 3.2.1
          command: ./gradlew test -Ptest.gradle-version=3.2.1
      - *store-test-results
      - *save-gradle-wrapper-gradle32
        
  java8_gradle31:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle31
      - run:
          name: Test against Gradle 3.1
          command: ./gradlew test -Ptest.gradle-version=3.1
      - *store-test-results
      - *save-gradle-wrapper-gradle31
        
  java8_gradle30:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle30
      - run:
          name: Test against Gradle 3.0
          command: ./gradlew test -Ptest.gradle-version=3.0
      - *store-test-results
      - *save-gradle-wrapper-gradle30
        
  java8_gradle214:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle214
      - run:
          name: Test against Gradle 2.14.1
          command: ./gradlew test -Ptest.gradle-version=2.14.1
      - *store-test-results
      - *save-gradle-wrapper-gradle214
        
  java8_gradle213:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle213
      - run:
          name: Test against Gradle 2.13
          command: ./gradlew test -Ptest.gradle-version=2.13
      - *store-test-results
      - *save-gradle-wrapper-gradle213
        
  java8_gradle212:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle212
      - run:
          name: Test against Gradle 2.12
          command: ./gradlew test -Ptest.gradle-version=2.12
      - *store-test-results
      - *save-gradle-wrapper-gradle212
        
  java8_gradle211:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle211
      - run:
          name: Test against Gradle 2.11
          command: ./gradlew test -Ptest.gradle-version=2.11
      - *store-test-results
      - *save-gradle-wrapper-gradle211
        
  java8_gradle210:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle210
      - run:
          name: Test against Gradle 2.10
          command: ./gradlew test -Ptest.gradle-version=2.10
      - *store-test-results
      - *save-gradle-wrapper-gradle210
        
  java8_gradle29:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle29
      - run:
          name: Test against Gradle 2.9
          command: ./gradlew test -Ptest.gradle-version=2.9
      - *store-test-results
      - *save-gradle-wrapper-gradle29
        
  java8_gradle28:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle28
      - run:
          name: Test against Gradle 2.8
          command: ./gradlew test -Ptest.gradle-version=2.8
      - *store-test-results
      - *save-gradle-wrapper-gradle28
        
  java8_gradle27:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle27
      - run:
          name: Test against Gradle 2.7
          command: ./gradlew test -Ptest.gradle-version=2.7
      - *store-test-results
      - *save-gradle-wrapper-gradle27
        
  java8_gradle26:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle26
      - run:
          name: Test against Gradle 2.6
          command: ./gradlew test -Ptest.gradle-version=2.6
      - *store-test-results
      - *save-gradle-wrapper-gradle26
        
  java8_gradle25:
    <<: *java8
    steps:
      - *attach-workspace
      - *restore-gradle-dependencies-java8
      - *restore-gradle-wrapper-current
      - *restore-gradle-wrapper-gradle25
      - run:
          name: Test against Gradle 2.5
          command: ./gradlew test -Ptest.gradle-version=2.5
      - *store-test-results
      - *save-gradle-wrapper-gradle25
        

workflows:
  version: 2
  tests:
    jobs:
      - checkout_code

      - java8:
          requires:
            - checkout_code
    
      - java9:
          requires:
            - java8
    
      - java10:
          requires:
            - java8
    
      - java8_gradle46:
          requires:
            - java8
            
        
      - java9_gradle46:
          requires:
            - java9
            - java8_gradle46
        
      - java8_gradle45:
          requires:
            - java8
            
        
      - java9_gradle45:
          requires:
            - java9
            - java8_gradle45
        
      - java8_gradle44:
          requires:
            - java8
            
        
      - java9_gradle44:
          requires:
            - java9
            - java8_gradle44
        
      - java8_gradle43:
          requires:
            - java8
            
        
      - java9_gradle43:
          requires:
            - java9
            - java8_gradle43
        
      - java8_gradle42:
          requires:
            - java8
            
        
      - java9_gradle42:
          requires:
            - java9
            - java8_gradle42
        
      - java8_gradle41:
          requires:
            - java8
            
        
      - java8_gradle40:
          requires:
            - java8
            
        
      - java8_gradle35:
          requires:
            - java8
            
        
      - java8_gradle34:
          requires:
            - java8
            
        
      - java8_gradle33:
          requires:
            - java8
            
        
      - java8_gradle32:
          requires:
            - java8
            
        
      - java8_gradle31:
          requires:
            - java8
            
        
      - java8_gradle30:
          requires:
            - java8
            
        
      - java8_gradle214:
          requires:
            - java8
            
        
      - java8_gradle213:
          requires:
            - java8
            
        
      - java8_gradle212:
          requires:
            - java8
            
        
      - java8_gradle211:
          requires:
            - java8
            
        
      - java8_gradle210:
          requires:
            - java8
            
        
      - java8_gradle29:
          requires:
            - java8
            
        
      - java8_gradle28:
          requires:
            - java8
            
        
      - java8_gradle27:
          requires:
            - java8
            
        
      - java8_gradle26:
          requires:
            - java8
            
        
      - java8_gradle25:
          requires:
            - java8
            